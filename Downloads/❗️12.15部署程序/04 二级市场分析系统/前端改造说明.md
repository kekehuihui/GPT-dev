# 前端改造说明

## 📝 改造步骤

### 1. 创建 index.html

将原始的 `二级市场分析系统.txt` 重命名为 `frontend/index.html`，然后进行以下修改：

#### 修改1：移除内联样式
- 删除 `<style>` 标签及其内容（第9-96行）
- 在 `<head>` 中添加：
```html
<link rel="stylesheet" href="assets/style.css">
```

#### 修改2：移除内联脚本
- 删除 `<script>` 标签及其内容（第312-888行）
- 在 `</body>` 之前添加：
```html
<!-- API客户端 -->
<script src="js/api.js"></script>
<!-- 应用主逻辑 -->
<script src="js/app.js"></script>
```

#### 修改3：配置API地址
在 `js/api.js` 文件开头，设置后端API地址：
```javascript
// 从环境变量或直接设置
const API_BASE_URL = window.API_BASE_URL || 'https://your-vercel-app.vercel.app';
```

### 2. 创建 assets/style.css

将原始HTML中的 `<style>` 标签内容（第9-96行）复制到 `frontend/assets/style.css`

### 3. 验证文件结构

最终结构应该是：
```
frontend/
├── index.html          # 主HTML（已改造）
├── assets/
│   └── style.css       # 样式文件
└── js/
    ├── api.js          # API客户端（已创建）
    └── app.js           # 应用逻辑（已创建）
```

## ✅ 检查清单

- [ ] HTML文件已移除内联样式和脚本
- [ ] 已添加外部CSS和JS引用
- [ ] CSS文件已创建
- [ ] API地址已配置
- [ ] 所有功能按钮的onclick事件仍然存在（无需修改）

## 🔍 关键修改点

### 原始代码（需要删除）：
```html
<script>
    const apiKey = '';  // ❌ 删除这行
    async function callGemini(payload) {
        const url = `https://generativelanguage.googleapis.com/v1beta/models/...?key=${apiKey}`;
        // ❌ 删除所有直接调用Gemini API的代码
    }
</script>
```

### 改造后（已实现）：
```html
<script src="js/api.js"></script>
<script src="js/app.js"></script>
```

所有API调用现在通过 `window.API` 对象，例如：
- `window.API.gemini.text(prompt)`
- `window.API.stock.getRealtime(code)`

## 🚀 快速开始

1. 复制原始HTML到 `frontend/index.html`
2. 按照上述步骤修改
3. 创建 `assets/style.css` 并复制样式
4. 确保 `js/api.js` 和 `js/app.js` 已存在
5. 配置API地址
6. 测试运行

## 📌 注意事项

- HTML结构完全不变，只移除内联代码
- 所有onclick事件保持不变
- UI和交互逻辑完全一致
- 只是数据获取方式改为调用后端API
